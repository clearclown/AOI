AOI (Agent Operational Interconnect) 要件定義書

1. システム概要

本システムは、各ユーザーのローカル環境で動作する「秘書エージェント」が、共通のAOIプロトコルを用いて相互に通信し、コンテキストの同期やタスクの実行制御を行うものである。

2. 機能要件

2.1 エージェント間通信 (AOI Protocol)

ID識別: TailscaleのNode IDまたは機体固有の証明書を用いたアイデンティティ管理。

能力宣言 (Discovery): 保持しているコンテキスト（リポジトリ名、Issue番号）や、実行可能なアクション（Read/Write/Execute）の公開。

セマンティック・クエリ: 自然言語を構造化したJSON-RPCによる、情報の問い合わせと回答。

2.2 秘書機能

コンテキスト・ミラーリング: Cursor/ClaudeCode等の作業ログをリアルタイムで監視し、外部クエリ用に要約・インデックス化する。

割り込み制御: エンジニアが集中している際、外部からの問い合わに対し「AIが代行回答」するか「バッファリング」するかを判断する。

作業代行依頼: 他のエージェントからの依頼（例：API仕様の確認）に基づき、ローカルの作業AIにタスクを投げ、結果を回収する。

2.3 ユーザーインターフェース

Human-in-the-loop (HitL): AI同士の合意内容を人間に提示し、最終承認を得るための承認UI。

監査ログ: 秘書AI同士が何を話し、何を操作したかを自然言語で振り返ることができるタイムライン。

3. 非機能要件

3.1 セキュリティとプライバシー

ゼロ知識証明的アプローチ: ソースコードそのものを渡さず、解析結果やBoolean（可能/不可能）のみを応答する。

スコープ限定: フォルダ単位、プロジェクト単位でのアクセス制御（ACL）。

完全閉域網通信: すべての通信はVPN (Tailscale等) を経由し、パブリックなエンドポイントを公開しない。

3.2 パフォーマンス

非同期レスポンス: 重い解析タスクは非同期で行い、完了時に通知（Webhook/AOI Notify）を送る。

4. 技術スタック（推奨）

Communication: libp2p または JSON-RPC over HTTPS

Networking: Tailscale (TS-Auth, ACLs)

Context Access: MCP (Model Context Protocol)

Agent Orchestration: LangGraph または AutoGen (拡張利用)